<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Lu Art</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts removed - using sans-serif only -->
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link href="css/index.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            
            <div class="container">
                
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ms-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                        <!-- <li class="nav-item"><a class="nav-link" href="indexSpanish.html">Spanish</a></li> -->
                        <li class="nav-item"><a class="nav-link" href="index.html" data-translate="nav.home">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="#about" data-translate="nav.about">Lu-Art</a></li>
                        <li class="nav-item"><a class="nav-link" href="#gallery" data-translate="nav.gallery">Galería</a></li>
                        <li class="nav-item"><a class="nav-link" href="tienda.html" data-translate="nav.shop">Tienda</a></li>
                        <li class="nav-item">
                            <button id="navbar-carrito-btn" class="btn btn-outline-light btn-sm ms-2 position-relative" type="button" data-bs-toggle="modal" data-bs-target="#carritoModal">
                                <i class="fas fa-shopping-cart"></i>
                                <span id="navbar-contador-carrito" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="display: none;">0</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button id="lang-toggle" class="btn btn-outline-light btn-sm ms-2" type="button">
                                <i class="fas fa-language"></i> <span data-translate="nav.language">ES</span>
                            </button>
                        </li>
                    </ul>
                </div>
        </nav>
        <header>
            <div class="overlay"></div>
            <div class="container h-100">
                <div class="d-flex h-100 text-center align-items-center">
                    <div class="w-100 text-white">
                        <a class="navbar-brand" href="#page-top">
                            <img src="assets/img/logo/LU ART COLOR.png" alt="..." />
                        </a>
                        <!-- <h1 class="display-3">Lu Art</h1> -->
                        <p class="lead mb-0" data-translate="header.tagline1">Arte con alma</p>
                        <p class="lead mb-0" data-translate="header.tagline2">Cerámica Artesanal</p>
                        <a href="shop.html" class="btn btn-primary btn-lg" data-translate="header.shop_button">
                            Tienda
                        </a>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- About-->
        <section class="page-section" id="about">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase" data-translate="about.title">Sobre Lu Art</h2>
                    <!-- <h3 class="section-subheading text-muted">Cerámica Artesanal</h3> -->
                    <p data-translate="about.description1">Lu Art es una tienda virtual de cerámica artesanal, que nace de la fusión de técnicas ancestrales con expresión artística contemporánea. </p>
                    <p data-translate="about.description2">Cada pieza de cerámica creada por Lu Art está diseñada para que, quién la adquiera, tenga una obra emocional, funcional y/o decorativa en sus espacios.</p>
                    <p><i class="fa-solid fa-hand-holding-heart"></i> <span data-translate="about.tagline">Arte con alma</span> <i class="fa-solid fa-hand-holding-heart"></i></p>
                </div>

                <!--Mision/Vision/Values-->
                <div class="accordion accordion-flush" id="accordionFlushExample">
                    <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne" data-translate="about.mission">
                        Misión
                        </button>
                    </h2>

                    <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body d-flex h-100 text-center align-items-center" data-translate="about.mission_text">Creamos piezas únicas de barro que trascienden lo visual, fusionando técnicas ancestrales con expresión artística contemporánea.  Nos dedicamos a explorar diversos caminos creativos, desde piezas funcionales hasta obras que complementan el arte en movimiento, estableciendo una conexión genuina entre el artista y quien adquiere cada obra. Nos dedicamos a materializar emociones a través del barro, garantizando la más alta calidad en cada creación.</div>
                    </div>
                    </div>
                    <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo" data-translate="about.vision">
                        Visión
                        </button>
                    </h2>
                    <div id="flush-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body d-flex h-100 text-center align-items-center" data-translate="about.vision_text">Ser un referente artístico versátil e innovador en el trabajo del barro, explorando diversos mercados y necesidades creativas, desde el hogar hasta espacios artísticos. Buscamos construir una comunidad diversa donde nuestras creaciones inspiren y conecten con diferentes públicos, mientras mantenemos la excelencia en cada pieza y la autenticidad de nuestra expresión artística.</div>
                    </div>
                    </div>
                </div>
                <br />
        </section>

        <!-- Gallery-->
        <section class="page-section" id="gallery">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase" data-translate="gallery.title">Galería</h2>
                    <h3 class="section-subheading text-muted" data-translate="gallery.subtitle">Lu Art</h3>
                </div>
                <div class="row">
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0920.jpg" class="w-100 shadow-1-strong rounded" alt="Boat on Calm Water" />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0926.jpg" class="w-100 shadow-1-strong rounded" alt="Wintry Mountain Landscape" />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0927.jpg" class="w-100 shadow-1-strong rounded" alt="..." />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0930.jpg" class="w-100 shadow-1-strong rounded" alt="..." />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0932.jpg" class="w-100 shadow-1-strong rounded" alt="..." />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0937.jpg" class="w-100 shadow-1-strong rounded" alt="..." />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0939.jpg" class="w-100 shadow-1-strong rounded" alt="..." />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0948.jpg" class="w-100 shadow-1-strong rounded" alt="Yosemite National Park" />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0951.jpg" class="w-100 shadow-1-strong rounded" alt="Waves at Sea" />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0952.jpg" class="w-100 shadow-1-strong rounded" alt="Yosemite National Park" />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0953.jpg" class="w-100 shadow-1-strong rounded" alt="Waves at Sea" />
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 mb-4">
                        <img src="/assets/img/Lu Art Photos/IMG_0954.jpg" class="w-100 shadow-1-strong rounded" alt="Yosemite National Park" />
                    </div>
                </div>                
        </section>

        <!-- Instagram Profile and comments -->
        <section>
            <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase" data-translate="instagram.title">Instagram</h2>
                <h3 class="section-subheading text-muted" data-translate="instagram.subtitle">Seguínos</h3>
            </div>
                <div class="content-container">
                    <div class="instagram-container">
                        <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/lu.artcr/" data-instgrm-version="13"></blockquote>
                    </div>
                    <div class="carousel">
                        <div class="comment" data-translate="instagram.comment1">"Simplemente hermoso"</div>
                        <div class="comment" data-translate="instagram.comment2">"Amo mi taza, es una obra de arte"</div>
                        <div class="comment" data-translate="instagram.comment3">"Excelente atención, volveré a comprar 👏👏"</div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Shop-->
        <section class="page-section" id="shop-ref">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase" data-translate="shop.title">Tienda</h2>
                    <h3 class="section-subheading text-muted" data-translate="shop.subtitle">Lu Art</h3>
                </div>
                
                <div class="row justify-content-center">
                    <!-- Tienda Category -->
                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="text-center">
                            <a href="tienda.html" class="category-link">
                                <div class="category-image mb-4" id="shop-category-image">
                                    <img src="./assets/img/pottery-8026823_1280.jpg" alt="Tienda" class="img-fluid">
                                </div>
                            </a>
                            <a href="tienda.html" class="btn btn-primary btn-xl text-uppercase" style="background-color: #e2a844 !important; border-color: #e2a844 !important; color: white !important;" data-translate="shop.buy_button">Comprar</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
            <!-- Call to action section-->
            <section class="py-5 bg-gradient-primary-to-secondary text-white">
                <div class="container px-5 my-5">
                    <div class="text-center">
                        <h2 class="display-4 fw-bolder mb-4" data-translate="contact.title">Contacto</h2>
                        <p class="email">lu.artcr@gmail.com</p>
                        <p class="mNumber"><i class="fa-brands fa-whatsapp"></i> (+506)7060-5427</p>
                        <!-- <a class="btn btn-outline-light btn-lg px-5 py-3 fs-6 fw-bolder" href="contact.html">Contact me</a>-->
                    </div>
                </div>
            </section>
            <!-- Footer-->
            <footer class="footer py-4">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-4 text-lg-start"> 
                            &copy; Lu Art 2025
                            <a href="admin-login.html" class="text-muted ms-3" style="font-size: 0.8em; text-decoration: none;">
                                <i class="fas fa-cog"></i> Admin
                            </a>
                            <a href="test-admin.html" class="text-muted ms-2" style="font-size: 0.8em; text-decoration: none;">
                                <i class="fas fa-test-tube"></i> Test
                            </a>
                            <a href="admin-simple.html" class="text-muted ms-2" style="font-size: 0.8em; text-decoration: none;">
                                <i class="fas fa-plus"></i> Simple
                            </a>
                            <a href="test-sync.html" class="text-muted ms-2" style="font-size: 0.8em; text-decoration: none;">
                                <i class="fas fa-sync"></i> Sync
                            </a>
                            <a href="test-debug.html" class="text-muted ms-2" style="font-size: 0.8em; text-decoration: none;">
                                <i class="fas fa-bug"></i> Debug
                            </a>
                        </div>
                        <div class="col-lg-4 my-3 my-lg-0">
                            <a id="footer-whatsapp-btn" class="btn btn-dark btn-social mx-2" href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                            <a class="btn btn-dark btn-social mx-2" href="https://www.instagram.com/lu.artcr/" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                </div>
            </footer>

            <!-- Carrito Modal -->
            <div class="modal fade" id="carritoModal" tabindex="-1" aria-labelledby="carritoModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content" style="background: white; border: none; border-radius: 15px;">
                        <div class="modal-header" style="border: none; padding: 2rem 2rem 1rem;">
                            <div class="text-center w-100">
                                <h2 class="section-heading text-uppercase text-dark" data-translate="cart.title">Carrito</h2>
                                <h3 class="section-subheading text-muted" data-translate="cart.subtitle">Lu Art</h3>
                            </div>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" style="padding: 1rem 2rem;">
                            <div class="table-responsive">
                                <table class="table table-bordered" style="background: white; border-radius: 10px; overflow: hidden;">
                                    <thead>
                                        <tr>
                                            <th data-translate="cart.product">Producto</th>
                                            <th data-translate="cart.price">Precio</th>
                                            <th data-translate="cart.quantity">Cantidad</th>
                                            <th data-translate="cart.total">Total</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody id="carrito-body"></tbody>
                                </table>
                            </div>
                        </div>
                        <div class="modal-footer" style="border: none; padding: 1rem 2rem 2rem; background: white;">
                            <div class="text-center w-100">
                                <h3 id="total" class="text-dark mb-3" data-translate="cart.total_label">Total: ₡0</h3>
                                <div class="d-flex gap-2 justify-content-center">
                                    <button id="vaciar-carrito-btn" class="btn btn-secondary btn-xl text-uppercase" style="background-color: #6c757d !important; border-color: #6c757d !important; color: white !important;" type="button" onclick="vaciarCarrito()" data-translate="cart.clear_cart">
                                        <i class="fas fa-trash me-2"></i>Vaciar Carrito
                                    </button>
                                    <button id="confirmar-compra-btn" class="btn btn-primary btn-xl text-uppercase" style="background-color: #e2a844 !important; border-color: #e2a844 !important; color: white !important;" type="button" data-bs-toggle="modal" data-bs-target="#modalPago" data-translate="cart.confirm_purchase">
                                        Confirmar compra
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal de Pago -->
            <div class="modal fade" id="modalPago" tabindex="-1" aria-labelledby="modalPagoLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content" style="background: white; border: none; border-radius: 15px;">
                        <div class="modal-header" style="border: none; padding: 2rem 2rem 1rem;">
                            <div class="text-center w-100">
                                <h2 class="section-heading text-uppercase text-dark" data-translate="payment.title">Confirmar Compra</h2>
                                <h3 class="section-subheading text-muted" data-translate="payment.subtitle">Lu Art</h3>
                            </div>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" style="padding: 1rem 2rem;">
                            <div class="row">
                                <div class="col-12">
                                    <div class="text-center mb-4">
                                        <h3 class="text-dark mb-3">CONFIRMAR COMPRA</h3>
                                        <p class="text-muted mb-4">
                                            Por favor, realizar el pago por Sinpe Móvil al <strong>(+506)70605427</strong> o por transferencia bancaria a la cuenta CR...
                                        </p>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <h5 class="text-dark mb-3">Productos seleccionados:</h5>
                                        <div id="productos-seleccionados" class="border p-3 rounded mb-3" style="background-color: #f8f9fa;">
                                            <!-- Los productos se mostrarán aquí dinámicamente -->
                                        </div>
                                        <div class="text-end">
                                            <h5 class="text-dark">Monto total a pagar: <span id="monto-total-pago">₡0</span></h5>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <h5 class="text-dark mb-3">DIRECCIÓN DE ENVÍO</h5>
                                        <form id="formPago">
                                            <div class="row">
                                                <div class="col-md-4 mb-3">
                                                    <label for="provincia" class="form-label">Provincia</label>
                                                    <select class="form-select" id="provincia" required>
                                                        <option value="">Seleccionar provincia</option>
                                                        <option value="san-jose">San José</option>
                                                        <option value="cartago">Cartago</option>
                                                        <option value="heredia">Heredia</option>
                                                        <option value="alajuela">Alajuela</option>
                                                        <option value="puntarenas">Puntarenas</option>
                                                        <option value="limon">Limón</option>
                                                        <option value="guanacaste">Guanacaste</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-4 mb-3">
                                                    <label for="canton" class="form-label">Cantón</label>
                                                    <select class="form-select" id="canton" required>
                                                        <option value="">Seleccionar cantón</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-4 mb-3">
                                                    <label for="distrito" class="form-label">Distrito</label>
                                                    <select class="form-select" id="distrito" required>
                                                        <option value="">Seleccionar distrito</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="direccion-exacta" class="form-label">Dirección exacta</label>
                                                <input type="text" class="form-control" id="direccion-exacta" placeholder="Ej: Casa 123, Barrio Los Ángeles" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="indicaciones" class="form-label">Indicaciones adicionales</label>
                                                <textarea class="form-control" id="indicaciones" rows="2" placeholder="Referencias, instrucciones especiales, etc."></textarea>
                                            </div>
                                        </form>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="factura-electronica">
                                            <label class="form-check-label" for="factura-electronica">
                                                <strong>MARCAR SI REQUIERE FACTURA ELECTRÓNICA</strong>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="text-center">
                                        <p class="text-muted mb-3">
                                            Por último, dar click al botón de WhatsApp para compartir el comprobante de pago y dirección de envío y, así, confirmar su compra y proceder.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer" style="border: none; padding: 1rem 2rem 2rem; background: white;">
                            <div class="text-center w-100">
                                <button id="enviar-whatsapp-footer-btn" class="btn btn-success btn-xl text-uppercase" onclick="enviarPedidoWhatsApp()">
                                    <i class="fab fa-whatsapp me-2"></i>Enviar por WhatsApp
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Whatsapp Button-->
            <div class="floating-button">
                <a id="floating-whatsapp-btn" href="#" target="_blank">
                <img src="./assets/img/Icons/whatsapp-logo-png-whatsapp-logo-png-transparent-amp-svg-vector-pluspng-2400x2400-1032059621.png" alt="WhatsApp">
                </a>
            </div>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
            <script src="js/scripts.js"></script>
            <!-- <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script> -->

            <!-- <script async src="//www.instagram.com/embed.js"></script> -->

            <!-- Translation Script -->
            <script>
            // Translation data
            const translations = {
                es: {
                    'nav.home': 'Home',
                    'nav.about': 'Lu-Art',
                    'nav.gallery': 'Galería',
                    'nav.shop': 'Tienda',
                    'nav.language': 'ES',
                    'header.tagline1': 'Arte con alma',
                    'header.tagline2': 'Cerámica Artesanal',
                    'header.shop_button': 'Tienda',
                    'about.title': 'Sobre Lu Art',
                    'about.description1': 'Lu Art es una tienda virtual de cerámica artesanal, que nace de la fusión de técnicas ancestrales con expresión artística contemporánea.',
                    'about.description2': 'Cada pieza de cerámica creada por Lu Art está diseñada para que, quién la adquiera, tenga una obra emocional, funcional y/o decorativa en sus espacios.',
                    'about.tagline': 'Arte con alma',
                    'about.mission': 'Misión',
                    'about.mission_text': 'Creamos piezas únicas de barro que trascienden lo visual, fusionando técnicas ancestrales con expresión artística contemporánea. Nos dedicamos a explorar diversos caminos creativos, desde piezas funcionales hasta obras que complementan el arte en movimiento, estableciendo una conexión genuina entre el artista y quien adquiere cada obra. Nos dedicamos a materializar emociones a través del barro, garantizando la más alta calidad en cada creación.',
                    'about.vision': 'Visión',
                    'about.vision_text': 'Ser un referente artístico versátil e innovador en el trabajo del barro, explorando diversos mercados y necesidades creativas, desde el hogar hasta espacios artísticos. Buscamos construir una comunidad diversa donde nuestras creaciones inspiren y conecten con diferentes públicos, mientras mantenemos la excelencia en cada pieza y la autenticidad de nuestra expresión artística.',
                    'gallery.title': 'Galería',
                    'gallery.subtitle': 'Lu Art',
                    'instagram.title': 'Instagram',
                    'instagram.subtitle': 'Seguínos',
                    'instagram.comment1': '"Simplemente hermoso"',
                    'instagram.comment2': '"Amo mi taza, es una obra de arte"',
                    'instagram.comment3': '"Excelente atención, volveré a comprar 👏👏"',
                    'shop.title': 'Tienda',
                    'shop.subtitle': 'Seguínos',
                    'shop.buy_button': 'Comprar',
                    'whatsapp.floating_message': 'Hola, quiero más información',
                    'contact.title': 'Contacto',
                    'cart.title': 'Carrito',
                    'cart.subtitle': 'Lu Art',
                    'cart.product': 'Producto',
                    'cart.price': 'Precio',
                    'cart.quantity': 'Cantidad',
                    'cart.total': 'Total',
                    'cart.total_label': 'Total: ₡0',
                    'cart.empty': 'No hay productos en el carrito',
                    'cart.no_products': 'No hay productos en el carrito',
                    'cart.clear_cart': 'Vaciar Carrito',
                    'cart.confirm_purchase': 'Confirmar compra',
                    'payment.title': 'Confirmar Compra',
                    'payment.subtitle': 'Lu Art',
                    'payment.customer_info': 'Información del Cliente',
                    'payment.delivery_info': 'Información de Entrega',
                    'payment.name': 'Nombre completo',
                    'payment.phone': 'Teléfono',
                    'payment.email': 'Email',
                    'payment.address': 'Dirección completa',
                    'payment.notes': 'Notas adicionales',
                    'payment.total': 'Total: ₡0',
                    'payment.send_order': 'Enviar Pedido'
                },
                en: {
                    'nav.home': 'Home',
                    'nav.about': 'Lu-Art',
                    'nav.gallery': 'Gallery',
                    'nav.shop': 'Shop',
                    'nav.language': 'EN',
                    'header.tagline1': 'Art with soul',
                    'header.tagline2': 'Handmade Ceramics',
                    'header.shop_button': 'Shop',
                    'about.title': 'About Lu Art',
                    'about.description1': 'Lu Art is a virtual store of handmade ceramics, born from the fusion of ancestral techniques with contemporary artistic expression.',
                    'about.description2': 'Each ceramic piece created by Lu Art is designed so that whoever acquires it has an emotional, functional and/or decorative work in their spaces.',
                    'about.tagline': 'Art with soul',
                    'about.mission': 'Mission',
                    'about.mission_text': 'We create unique clay pieces that transcend the visual, fusing ancestral techniques with contemporary artistic expression. We are dedicated to exploring various creative paths, from functional pieces to works that complement art in motion, establishing a genuine connection between the artist and whoever acquires each work. We are dedicated to materializing emotions through clay, guaranteeing the highest quality in each creation.',
                    'about.vision': 'Vision',
                    'about.vision_text': 'To be a versatile and innovative artistic reference in clay work, exploring various markets and creative needs, from home to artistic spaces. We seek to build a diverse community where our creations inspire and connect with different audiences, while maintaining excellence in each piece and the authenticity of our artistic expression.',
                    'gallery.title': 'Gallery',
                    'gallery.subtitle': 'Lu Art',
                    'instagram.title': 'Instagram',
                    'instagram.subtitle': 'Follow us',
                    'instagram.comment1': '"Simply beautiful"',
                    'instagram.comment2': '"I love my cup, it\'s a work of art"',
                    'instagram.comment3': '"Excellent service, I\'ll buy again 👏👏"',
                    'shop.title': 'Shop',
                    'shop.subtitle': 'Follow us',
                    'shop.buy_button': 'Buy',
                    'whatsapp.floating_message': 'Hello, I want more information',
                    'contact.title': 'Contact',
                    'cart.title': 'Cart',
                    'cart.subtitle': 'Lu Art',
                    'cart.product': 'Product',
                    'cart.price': 'Price',
                    'cart.quantity': 'Quantity',
                    'cart.total': 'Total',
                    'cart.total_label': 'Total: ₡0',
                    'cart.empty': 'No products in cart',
                    'cart.no_products': 'No products in cart',
                    'cart.clear_cart': 'Clear Cart',
                    'cart.confirm_purchase': 'Confirm Purchase',
                    'payment.title': 'Confirm Purchase',
                    'payment.subtitle': 'Lu Art',
                    'payment.customer_info': 'Customer Information',
                    'payment.delivery_info': 'Delivery Information',
                    'payment.name': 'Full name',
                    'payment.phone': 'Phone',
                    'payment.email': 'Email',
                    'payment.address': 'Full address',
                    'payment.notes': 'Additional notes',
                    'payment.total': 'Total: ₡0',
                    'payment.send_order': 'Send Order'
                }
            };

            let currentLanguage = localStorage.getItem('selectedLanguage') || 'es';
            
            // Hacer las variables globalmente disponibles
            window.translations = translations;
            window.currentLanguage = currentLanguage;

            // Función para actualizar los botones de WhatsApp
            function actualizarBotonesWhatsApp() {
                // Esperar un poco para asegurar que los elementos estén disponibles
                setTimeout(() => {
                    const floatingBtn = document.getElementById('floating-whatsapp-btn');
                    const footerBtn = document.getElementById('footer-whatsapp-btn');
                    
                    if (translations[currentLanguage] && translations[currentLanguage]['whatsapp.floating_message']) {
                        const message = encodeURIComponent(translations[currentLanguage]['whatsapp.floating_message']);
                        const whatsappUrl = `https://wa.me/50670605427?text=${message}`;
                        
                        if (floatingBtn) {
                            floatingBtn.href = whatsappUrl;
                        }
                        if (footerBtn) {
                            footerBtn.href = whatsappUrl;
                        }
                    }
                }, 100);
            }

            function translatePage(language) {
                const elements = document.querySelectorAll('[data-translate]');
                elements.forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translations[language] && translations[language][key]) {
                        element.textContent = translations[language][key];
                    }
                });
                currentLanguage = language;
                
                // Guardar idioma en localStorage
                localStorage.setItem('selectedLanguage', language);
                
                // Update WhatsApp buttons
                actualizarBotonesWhatsApp();
                
                // Update language toggle button
                const langToggle = document.getElementById('lang-toggle');
                if (langToggle) {
                    const span = langToggle.querySelector('span');
                    if (span) {
                        span.textContent = language.toUpperCase();
                    }
                }
            }

            // Initialize language toggle
            document.addEventListener('DOMContentLoaded', function() {
                // Cargar idioma guardado y aplicar traducción
                translatePage(currentLanguage);
                
                const langToggle = document.getElementById('lang-toggle');
                if (langToggle) {
                    langToggle.addEventListener('click', function() {
                        const newLanguage = currentLanguage === 'es' ? 'en' : 'es';
                        translatePage(newLanguage);
                    });
                }
                
                // Initialize WhatsApp buttons
                actualizarBotonesWhatsApp();
            });
            </script>
            
            <!-- Script de prueba básico -->
            <script>
            console.log('=== SCRIPT BÁSICO DE INDEX FUNCIONANDO ===');
            </script>
            
            <!-- SweetAlert2 -->
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
            
            <!-- Carrito JavaScript -->
            <script src="js/carrito.js?v=20241220"></script>
            
            <!-- FUNCIONES GLOBALES INMEDIATAS -->
            <script>
            // Definir funciones de cierre inmediatamente para disponibilidad global
            window.cerrarCarrito = function() {
                console.log('Cerrando carrito manualmente...');
                window.carritoClosingIntentionally = true;
                const modal = bootstrap.Modal.getInstance(document.getElementById('carritoModal'));
                if (modal) {
                    modal.hide();
                }
            };
            
            window.cerrarModalPago = function() {
                console.log('Cerrando modal de pago manualmente...');
                window.pagoClosingIntentionally = true;
                const modal = bootstrap.Modal.getInstance(document.getElementById('modalPago'));
                if (modal) {
                    modal.hide();
                }
            };
            
            console.log('✅ Funciones de cierre definidas inmediatamente:', {
                cerrarCarrito: typeof window.cerrarCarrito,
                cerrarModalPago: typeof window.cerrarModalPago
            });
            </script>
            
            <!-- Script de verificación y función de respaldo -->
            <script>
            console.log('=== SCRIPT DE INDEX CARGADO ===');
            console.log('=== VERIFICACIÓN DE CARGA DE SCRIPTS ===');
            
            // Verificar si hay scripts conflictivos ejecutándose
            setTimeout(() => {
                console.log('🔍 VERIFICANDO SCRIPTS CONFLICTIVOS...');
                const scripts = document.querySelectorAll('script[src*="carrito"]');
                scripts.forEach((script, index) => {
                    console.log(`Script ${index + 1}:`, script.src);
                });
            }, 1000);
            console.log('SweetAlert2 disponible:', typeof Swal !== 'undefined');
            console.log('Función vaciarCarrito disponible:', typeof vaciarCarrito !== 'undefined');
            console.log('window.vaciarCarrito disponible:', typeof window.vaciarCarrito !== 'undefined');
            
            // Función de respaldo simple
            if (typeof vaciarCarrito === 'undefined') {
                console.log('Creando función de respaldo vaciarCarrito');
                window.vaciarCarrito = function() {
                    console.log('Función de respaldo vaciarCarrito llamada');
                    
                    // Intentar obtener el carrito desde localStorage
                    let carrito = [];
                    try {
                        const carritoGuardado = localStorage.getItem('luArtCarrito');
                        if (carritoGuardado) {
                            carrito = JSON.parse(carritoGuardado);
                        }
                    } catch (e) {
                        console.error('Error cargando carrito desde localStorage:', e);
                    }
                    
                    if (carrito.length === 0) {
                        alert('El carrito ya está vacío');
                        return;
                    }
                    
                    if (confirm('¿Estás seguro de que quieres vaciar el carrito?')) {
                        // Vaciar el carrito
                        localStorage.removeItem('luArtCarrito');
                        
                        // Recargar la página para actualizar la interfaz
                        location.reload();
                    }
                };
            }
            </script>
            
            // Función de emergencia para limpiar todo - DEFINIDA DIRECTAMENTE
            window.limpiarTodo = function() {
                console.log('=== LIMPIEZA DE EMERGENCIA ===');
                
                // Restaurar scroll del body
                document.body.style.overflow = '';
                document.body.style.paddingRight = '';
                
                // Remover clases de modal
                document.body.classList.remove('modal-open');
                
                // Remover cualquier backdrop residual
                const backdrops = document.querySelectorAll('.modal-backdrop');
                console.log('Backdrops encontrados:', backdrops.length);
                backdrops.forEach(backdrop => {
                    console.log('Removiendo backdrop:', backdrop);
                    backdrop.remove();
                });
                
                // Cerrar todos los modales de Bootstrap
                if (typeof bootstrap !== 'undefined') {
                    const modales = document.querySelectorAll('.modal.show');
                    modales.forEach(modal => {
                        const modalInstance = bootstrap.Modal.getInstance(modal);
                        if (modalInstance) {
                            modalInstance.hide();
                        }
                    });
                }
                
                console.log('Limpieza de emergencia completada');
            };
            
            console.log('Función limpiarTodo definida en index.html:', typeof window.limpiarTodo !== 'undefined');
            
            // Función para vaciar carrito
            window.vaciarCarrito = function() {
                console.log('=== VACIANDO CARRITO ===');
                localStorage.removeItem('luArtCarrito');
                
                // Actualizar contador del navbar y renderizar carrito
                window.actualizarContadorCarrito();
                window.renderCarrito();
                
                console.log('Carrito vaciado exitosamente');
                alert('Carrito vaciado');
            };
            
            // Función actualizarContadorCarrito ya está definida en scripts.js, no duplicar
            
            // Función para cambiar cantidad de productos
            window.cambiarCantidad = function(index, cambio, nuevaCantidad = null) {
                console.log('=== CAMBIANDO CANTIDAD ===', {index, cambio, nuevaCantidad});
                
                let carrito = [];
                try {
                    const carritoGuardado = localStorage.getItem('luArtCarrito');
                    if (carritoGuardado) {
                        carrito = JSON.parse(carritoGuardado);
                    }
                } catch (e) {
                    console.error('Error cargando carrito:', e);
                }
                
                if (index >= 0 && index < carrito.length) {
                    if (nuevaCantidad !== null) {
                        carrito[index].cantidad = parseInt(nuevaCantidad) || 1;
                    } else {
                        carrito[index].cantidad += cambio;
                        if (carrito[index].cantidad < 1) {
                            carrito[index].cantidad = 1;
                        }
                    }
                    
                    localStorage.setItem('luArtCarrito', JSON.stringify(carrito));
                    window.renderCarrito();
                    window.actualizarContadorCarrito();
                    
                    console.log('Cantidad actualizada:', carrito[index]);
                }
            };
            
            // Función para eliminar producto del carrito
            window.eliminarDelCarrito = function(index) {
                console.log('=== ELIMINANDO DEL CARRITO ===', index);
                
                let carrito = [];
                try {
                    const carritoGuardado = localStorage.getItem('luArtCarrito');
                    if (carritoGuardado) {
                        carrito = JSON.parse(carritoGuardado);
                    }
                } catch (e) {
                    console.error('Error cargando carrito:', e);
                }
                
                if (index >= 0 && index < carrito.length) {
                    const productoEliminado = carrito.splice(index, 1)[0];
                    localStorage.setItem('luArtCarrito', JSON.stringify(carrito));
                    window.renderCarrito();
                    window.actualizarContadorCarrito();
                    
                    console.log('Producto eliminado:', productoEliminado);
                    alert(`Producto "${productoEliminado.nombre}" eliminado del carrito`);
                }
            };
            
            // Event listener para actualizar contador cuando cambie el localStorage
            window.addEventListener('storage', function(e) {
                if (e.key === 'luArtCarrito') {
                    console.log('Storage cambió, actualizando contador');
                    window.actualizarContadorCarrito();
                }
            });
            

            // Función para agregar productos de prueba al carrito
            window.agregarProductosPrueba = function() {
                console.log('=== AGREGANDO PRODUCTOS DE PRUEBA ===');
                
                const productosPrueba = [
                    { id: 1, nombre: 'Snack Bowl Grande', precio: 18900, cantidad: 1 },
                    { id: 2, nombre: 'Paleta pincelada', precio: 17900, cantidad: 1 }
                ];
                
                localStorage.setItem('luArtCarrito', JSON.stringify(productosPrueba));
                console.log('Productos de prueba agregados:', productosPrueba);
                
                // Actualizar contador del navbar y renderizar carrito
                window.actualizarContadorCarrito();
                window.renderCarrito();
                
                alert('Productos de prueba agregados al carrito!');
            };
            
            // Función renderCarrito ya está definida en scripts.js, no duplicar

            // Función cambiarCantidad ya está definida arriba, no duplicar

            // Función eliminarDelCarrito ya está definida arriba, no duplicar

            // Función vaciarCarrito ya está definida arriba, no duplicar
            
            // Funciones de cierre ya definidas arriba - no duplicar
            
            // Actualizar contador al cargar la página
            document.addEventListener('DOMContentLoaded', function() {
                console.log('=== DOMContentLoaded - ACTUALIZANDO CONTADOR ===');
                console.log('Verificando elementos...');
                
                const carritoBody = document.getElementById('carrito-body');
                const totalElement = document.getElementById('total');
                const contador = document.getElementById('navbar-contador-carrito');
                const modal = document.getElementById('carritoModal');
                
                console.log('Elementos encontrados:', {
                    carritoBody: !!carritoBody,
                    totalElement: !!totalElement,
                    contador: !!contador,
                    modal: !!modal
                });
                
                window.actualizarContadorCarrito();
                window.renderCarrito();
                
                // Renderizar carrito cuando se abra el modal
                const modalCarrito = document.getElementById('carritoModal');
                if (modalCarrito) {
                    modalCarrito.addEventListener('show.bs.modal', function() {
                        console.log('Modal de carrito abierto, renderizando...');
                        window.renderCarrito();
                    });
                } else {
                    console.error('Modal carritoModal no encontrado');
                }
            });
            
            // PROTECCIÓN ULTRA AGRESIVA PARA AMBOS MODALES
            console.log('=== INICIANDO PROTECCIÓN ULTRA AGRESIVA ===');
            
            // Variables globales para control de cierre
            window.carritoClosingIntentionally = false;
            window.pagoClosingIntentionally = false;
            
            // Función para proteger cualquier modal
            function protegerModal(modalId, closingFlag) {
                const modal = document.getElementById(modalId);
                if (!modal) {
                    console.error(`Modal ${modalId} no encontrado`);
                    return;
                }
                
                console.log(`Protegiendo modal ${modalId}...`);
                
                // Configurar como estático
                modal.setAttribute('data-bs-backdrop', 'static');
                modal.setAttribute('data-bs-keyboard', 'false');
                
                // Sobrescribir completamente el comportamiento de Bootstrap
                const originalHide = modal.hide;
                modal.hide = function() {
                    console.log(`Modal ${modalId} intentando cerrar...`);
                    console.log(`${closingFlag}:`, window[closingFlag]);
                    
                    if (!window[closingFlag]) {
                        console.log(`Cierre automático de ${modalId} BLOQUEADO`);
                        return false;
                    } else {
                        console.log(`Cierre intencional de ${modalId} permitido`);
                        window[closingFlag] = false;
                        return originalHide.call(this);
                    }
                };
                
                // Event listeners múltiples
                modal.addEventListener('hide.bs.modal', function(e) {
                    console.log(`Event hide.bs.modal para ${modalId}`);
                    if (!window[closingFlag]) {
                        e.preventDefault();
                        e.stopPropagation();
                        e.stopImmediatePropagation();
                        console.log(`Evento hide.bs.modal de ${modalId} BLOQUEADO`);
                        return false;
                    }
                }, true);
                
                // Monitoreo ultra agresivo
                let monitoringInterval = setInterval(function() {
                    if (modal.classList.contains('show') && !window[closingFlag]) {
                        console.log(`Monitoreando ${modalId} - FORZANDO apertura...`);
                        
                        // Forzar que permanezca abierto
                        if (!modal.classList.contains('show')) {
                            modal.classList.add('show');
                        }
                        if (modal.style.display !== 'block') {
                            modal.style.display = 'block';
                        }
                        if (!document.body.classList.contains('modal-open')) {
                            document.body.classList.add('modal-open');
                        }
                        
                        // Restaurar atributos
                        modal.setAttribute('data-bs-backdrop', 'static');
                        modal.setAttribute('data-bs-keyboard', 'false');
                        
                        // Crear backdrop si no existe
                        const backdrops = document.querySelectorAll('.modal-backdrop');
                        if (backdrops.length === 0) {
                            const backdrop = document.createElement('div');
                            backdrop.className = 'modal-backdrop fade show';
                            backdrop.style.zIndex = '1040';
                            document.body.appendChild(backdrop);
                        }
                    }
                }, 100);
                
                // Limpiar intervalo cuando se cierre intencionalmente
                modal.addEventListener('hidden.bs.modal', function() {
                    if (window[closingFlag]) {
                        console.log(`Limpiando monitoreo de ${modalId}`);
                        clearInterval(monitoringInterval);
                    }
                });
            }
            
            // Proteger ambos modales
            protegerModal('carritoModal', 'carritoClosingIntentionally');
            protegerModal('modalPago', 'pagoClosingIntentionally');
            
            // INTERCEPTACIÓN GLOBAL ULTRA AGRESIVA
            document.addEventListener('hide.bs.modal', function(e) {
                const modalId = e.target.id;
                console.log(`INTERCEPTACIÓN GLOBAL: Modal ${modalId} intentando cerrar`);
                
                if (modalId === 'carritoModal' && !window.carritoClosingIntentionally) {
                    console.log('BLOQUEANDO carritoModal globalmente');
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    return false;
                }
                
                if (modalId === 'modalPago' && !window.pagoClosingIntentionally) {
                    console.log('BLOQUEANDO modalPago globalmente');
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    return false;
                }
            }, true);
            
            // Interceptar TODOS los clicks en backdrop
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal-backdrop')) {
                    const modalAbierto = document.querySelector('.modal.show');
                    if (modalAbierto) {
                        const modalId = modalAbierto.id;
                        console.log(`INTERCEPTACIÓN: Click en backdrop de ${modalId}`);
                        
                        if (modalId === 'carritoModal' && !window.carritoClosingIntentionally) {
                            console.log('BLOQUEANDO click en backdrop del carrito');
                            e.preventDefault();
                            e.stopPropagation();
                            e.stopImmediatePropagation();
                            return false;
                        }
                        
                        if (modalId === 'modalPago' && !window.pagoClosingIntentionally) {
                            console.log('BLOQUEANDO click en backdrop del pago');
                            e.preventDefault();
                            e.stopPropagation();
                            e.stopImmediatePropagation();
                            return false;
                        }
                    }
                }
            }, true);
            
            // Interceptar TODAS las teclas Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const modalAbierto = document.querySelector('.modal.show');
                    if (modalAbierto) {
                        const modalId = modalAbierto.id;
                        console.log(`INTERCEPTACIÓN: Escape en ${modalId}`);
                        
                        if (modalId === 'carritoModal' && !window.carritoClosingIntentionally) {
                            console.log('BLOQUEANDO Escape en carrito');
                            e.preventDefault();
                            e.stopPropagation();
                            e.stopImmediatePropagation();
                            return false;
                        }
                        
                        if (modalId === 'modalPago' && !window.pagoClosingIntentionally) {
                            console.log('BLOQUEANDO Escape en pago');
                            e.preventDefault();
                            e.stopPropagation();
                            e.stopImmediatePropagation();
                            return false;
                        }
                    }
                }
            }, true);
            
            console.log('=== PROTECCIÓN ULTRA AGRESIVA CONFIGURADA ===');
            
            // Función de limpieza de emergencia (reemplaza la de carrito.js)
            window.limpiarTodo = function() {
                console.log('=== LIMPIEZA DE EMERGENCIA DESDE INDEX.HTML ===');
                
                // Solo limpiar si NO hay modales protegidos abiertos
                const carritoAbierto = document.getElementById('carritoModal').classList.contains('show');
                const pagoAbierto = document.getElementById('modalPago').classList.contains('show');
                
                if (carritoAbierto || pagoAbierto) {
                    console.log('Modales protegidos abiertos - NO limpiando');
                    return;
                }
                
                // Restaurar scroll del body
                document.body.style.overflow = '';
                document.body.style.paddingRight = '';
                
                // Remover clases de modal
                document.body.classList.remove('modal-open');
                
                // Remover cualquier backdrop residual
                const backdrops = document.querySelectorAll('.modal-backdrop');
                console.log('Backdrops encontrados:', backdrops.length);
                backdrops.forEach(backdrop => {
                    console.log('Removiendo backdrop:', backdrop);
                    backdrop.remove();
                });
                
                console.log('Limpieza de emergencia completada');
            };
            
            // INTERCEPTAR CUALQUIER LLAMADA A LIMPIARTODO DESDE OTROS SCRIPTS
            const originalLimpiarTodo = window.limpiarTodo;
            window.limpiarTodo = function() {
                console.log('🚫 INTERCEPTANDO llamada a limpiarTodo...');
                
                // Verificar si hay modales protegidos abiertos
                const carritoAbierto = document.getElementById('carritoModal').classList.contains('show');
                const pagoAbierto = document.getElementById('modalPago').classList.contains('show');
                
                if (carritoAbierto || pagoAbierto) {
                    console.log('🚫 BLOQUEANDO limpiarTodo - modales protegidos abiertos');
                    console.log('Carrito abierto:', carritoAbierto);
                    console.log('Pago abierto:', pagoAbierto);
                    return; // NO ejecutar limpieza
                }
                
                console.log('✅ Ejecutando limpiarTodo - no hay modales protegidos abiertos');
                return originalLimpiarTodo.call(this);
            };
            
            // Función para abrir el modal de pago desde el carrito
            window.abrirModalPago = function() {
                console.log('Abriendo modal de pago desde carrito...');
                
                // Cerrar el modal del carrito primero (intencionalmente)
                window.carritoClosingIntentionally = true;
                const modalCarrito = bootstrap.Modal.getInstance(document.getElementById('carritoModal'));
                if (modalCarrito) {
                    modalCarrito.hide();
                }
                
                // Esperar un momento y luego abrir el modal de pago
                setTimeout(function() {
                    const modalPagoElement = document.getElementById('modalPago');
                    
                    // Reforzar configuración antes de abrir
                    modalPagoElement.setAttribute('data-bs-backdrop', 'static');
                    modalPagoElement.setAttribute('data-bs-keyboard', 'false');
                    window.pagoClosingIntentionally = false;
                    
                    const modalPago = new bootstrap.Modal(modalPagoElement, {
                        backdrop: 'static',
                        keyboard: false
                    });
                    modalPago.show();
                    console.log('Modal de pago abierto con configuración reforzada');
                }, 300);
            };

            // FUNCIONES GLOBALES YA DEFINIDAS ARRIBA - NO DUPLICAR

            // Función para debug del carrito - definida al final para asegurar disponibilidad
            window.debugCarrito = function() {
                console.log('=== DEBUG CARRITO ===');
                
                const carritoBody = document.getElementById('carrito-body');
                const totalElement = document.getElementById('total');
                const contador = document.getElementById('navbar-contador-carrito');
                const modal = document.getElementById('carritoModal');
                
                console.log('Elementos encontrados:', {
                    carritoBody: !!carritoBody,
                    totalElement: !!totalElement,
                    contador: !!contador,
                    modal: !!modal
                });
                
                console.log('Detalles de elementos:', {
                    carritoBody: carritoBody,
                    totalElement: totalElement,
                    contador: contador,
                    modal: modal
                });
                
                const carrito = JSON.parse(localStorage.getItem('luArtCarrito') || '[]');
                console.log('Carrito en localStorage:', carrito);
                
                alert('Debug completado - revisa la consola');
            };
            
        </body>
        
        <!-- Script de verificación simple -->
        <script>
            console.log('=== SCRIPT SIMPLE EJECUTÁNDOSE ===');
            console.log('Página cargada correctamente');
            
            // Función de prueba simple
            window.probarWhatsAppSimple = function() {
                console.log('=== FUNCIÓN DE PRUEBA SIMPLE ===');
                const url = 'https://wa.me/50670605427';
                console.log('Abriendo WhatsApp:', url);
                window.open(url, '_blank');
            };
            
            // Función de debug como respaldo
            if (typeof window.debugCarrito === 'undefined') {
                window.debugCarrito = function() {
                    console.log('=== DEBUG CARRITO (RESPALDO) ===');
                    
                    const carritoBody = document.getElementById('carrito-body');
                    const totalElement = document.getElementById('total');
                    const contador = document.getElementById('navbar-contador-carrito');
                    const modal = document.getElementById('carritoModal');
                    
                    console.log('Elementos encontrados:', {
                        carritoBody: !!carritoBody,
                        totalElement: !!totalElement,
                        contador: !!contador,
                        modal: !!modal
                    });
                    
                    const carrito = JSON.parse(localStorage.getItem('luArtCarrito') || '[]');
                    console.log('Carrito en localStorage:', carrito);
                    
                    alert('Debug completado - revisa la consola');
                };
                console.log('Función debugCarrito creada como respaldo');
            }
            
            // Función para agregar productos de prueba como respaldo
            if (typeof window.agregarProductosPrueba === 'undefined') {
                window.agregarProductosPrueba = function() {
                    console.log('=== AGREGANDO PRODUCTOS DE PRUEBA (RESPALDO) ===');
                    
                    const productosPrueba = [
                        { id: 1, nombre: 'Snack Bowl Grande', precio: 18900, cantidad: 1 },
                        { id: 2, nombre: 'Paleta pincelada', precio: 17900, cantidad: 1 }
                    ];
                    
                    localStorage.setItem('luArtCarrito', JSON.stringify(productosPrueba));
                    console.log('Productos de prueba agregados:', productosPrueba);
                    
                    // Actualizar contador del navbar y renderizar carrito
                    if (typeof window.actualizarContadorCarrito === 'function') {
                        window.actualizarContadorCarrito();
                    }
                    if (typeof window.renderCarrito === 'function') {
                        window.renderCarrito();
                    }
                    
                    alert('Productos de prueba agregados al carrito!');
                };
                console.log('Función agregarProductosPrueba creada como respaldo');
            }
            
            // Función actualizarContadorCarrito ya está definida en scripts.js, no crear respaldo
            
            // Función renderCarrito ya está definida arriba, no crear respaldo
            
            // Función para cerrar el modal del carrito como respaldo
            if (typeof window.cerrarCarrito === 'undefined') {
                window.cerrarCarrito = function() {
                    console.log('Cerrando carrito manualmente (respaldo)...');
                    window.carritoClosingIntentionally = true;
                    const modal = bootstrap.Modal.getInstance(document.getElementById('carritoModal'));
                    if (modal) {
                        modal.hide();
                    }
                };
                console.log('Función cerrarCarrito creada como respaldo');
            }
            
            // Función para abrir modal de pago como respaldo
            if (typeof window.abrirModalPago === 'undefined') {
                window.abrirModalPago = function() {
                    console.log('Abriendo modal de pago desde carrito (respaldo)...');
                    
                    // Cerrar el modal del carrito primero
                    window.carritoClosingIntentionally = true;
                    const modalCarrito = bootstrap.Modal.getInstance(document.getElementById('carritoModal'));
                    if (modalCarrito) {
                        modalCarrito.hide();
                    }
                    
                    // Esperar un momento y luego abrir el modal de pago
                    setTimeout(function() {
                        const modalPago = new bootstrap.Modal(document.getElementById('modalPago'));
                        modalPago.show();
                        console.log('Modal de pago abierto');
                    }, 300);
                };
                console.log('Función abrirModalPago creada como respaldo');
            }
            
            // Datos de provincias, cantones y distritos de Costa Rica
            const datosCostaRica = {
                'san-jose': {
                    nombre: 'San José',
                    cantones: {
                        'san-jose': { nombre: 'San José', distritos: ['Carmen', 'Merced', 'Hospital', 'Catedral', 'Zapote', 'San Francisco de Dos Ríos', 'Uruca', 'Mata Redonda', 'Pavas', 'Hatillo', 'San Sebastián'] },
                        'escazu': { nombre: 'Escazú', distritos: ['Escazú', 'San Antonio', 'San Rafael'] },
                        'desamparados': { nombre: 'Desamparados', distritos: ['Desamparados', 'San Miguel', 'San Juan de Dios', 'San Rafael Arriba', 'San Antonio', 'Frailes', 'Patarrá', 'San Cristóbal', 'Rosario', 'Damas', 'San Rafael Abajo', 'Gravilias', 'Los Guido'] },
                        'puriscal': { nombre: 'Puriscal', distritos: ['Santiago', 'Mercedes Sur', 'Barbacoas', 'Grifo Alto', 'San Rafael', 'Candelarita', 'Desamparaditos', 'San Antonio', 'Chires'] },
                        'tarrazu': { nombre: 'Tarrazú', distritos: ['San Marcos', 'San Lorenzo', 'San Carlos'] },
                        'aserrí': { nombre: 'Aserrí', distritos: ['Aserrí', 'Tarbaca', 'Vuelta de Jorco', 'San Gabriel', 'Legua', 'Monterrey', 'Salitrillos'] },
                        'mora': { nombre: 'Mora', distritos: ['Colón', 'Guayabo', 'Tabarcia', 'Piedras Negras', 'Picagres', 'Jaris', 'Quitirrisí'] },
                        'goicoechea': { nombre: 'Goicoechea', distritos: ['Guadalupe', 'San Francisco', 'Calle Blancos', 'Mata de Plátano', 'Ipís', 'Rancho Redondo', 'Purral'] },
                        'santa-ana': { nombre: 'Santa Ana', distritos: ['Santa Ana', 'Salitral', 'Pozos', 'Uruca', 'Piedades', 'Brasil'] },
                        'alajuelita': { nombre: 'Alajuelita', distritos: ['Alajuelita', 'San Josecito', 'San Antonio', 'Concepción', 'San Felipe', 'San Isidro'] },
                        'coronado': { nombre: 'Coronado', distritos: ['San Isidro', 'San Rafael', 'Dulce Nombre de Jesús', 'Patalillo', 'Cascajal'] },
                        'acosta': { nombre: 'Acosta', distritos: ['San Ignacio', 'Guaitil', 'Palmichal', 'Cangrejal', 'Sabanillas'] },
                        'tibas': { nombre: 'Tibás', distritos: ['San Juan', 'Cinco Esquinas', 'Anselmo Llorente', 'León XIII', 'Colima'] },
                        'moravia': { nombre: 'Moravia', distritos: ['San Vicente', 'San Jerónimo', 'La Trinidad'] },
                        'montes-de-oca': { nombre: 'Montes de Oca', distritos: ['San Pedro', 'Sabanilla', 'Mercedes', 'San Rafael'] },
                        'turrubares': { nombre: 'Turrubares', distritos: ['San Pablo', 'San Pedro', 'San Juan de Mata', 'San Luis', 'Carara'] },
                        'dota': { nombre: 'Dota', distritos: ['Santa María', 'Jardín', 'Copey'] },
                        'curridabat': { nombre: 'Curridabat', distritos: ['Curridabat', 'Granadilla', 'Sánchez', 'Tirrases'] },
                        'perez-zeledon': { nombre: 'Pérez Zeledón', distritos: ['San Isidro de El General', 'General', 'Daniel Flores', 'Rivas', 'San Pedro', 'Platanares', 'Pejibaye', 'Cajón', 'Barú', 'Río Nuevo', 'Páramo', 'La Amistad'] },
                        'leon-cortes': { nombre: 'León Cortés', distritos: ['San Pablo', 'San Andrés', 'Llano Bonito', 'San Isidro', 'Santa Cruz', 'San Antonio'] }
                    }
                },
                'cartago': {
                    nombre: 'Cartago',
                    cantones: {
                        'cartago': { nombre: 'Cartago', distritos: ['Oriental', 'Occidental', 'Carmen', 'San Nicolás', 'Aguacaliente', 'Guadalupe', 'Corralillo', 'Tierra Blanca', 'Dulce Nombre', 'Llano Grande', 'Quebradilla'] },
                        'paraiso': { nombre: 'Paraíso', distritos: ['Paraíso', 'Santiago', 'Orosi', 'Cachí', 'Llanos de Santa Lucía'] },
                        'la-union': { nombre: 'La Unión', distritos: ['Tres Ríos', 'San Diego', 'San Juan', 'San Rafael', 'Concepción', 'Dulce Nombre', 'San Ramón', 'Río Azul'] },
                        'jimenez': { nombre: 'Jiménez', distritos: ['Juan Viñas', 'Tucurrique', 'Pejibaye'] },
                        'turrialba': { nombre: 'Turrialba', distritos: ['Turrialba', 'La Suiza', 'Peralta', 'Santa Cruz', 'Santa Teresita', 'Pavones', 'Tuis', 'Tayutic', 'Santa Rosa', 'Tres Equis', 'La Isabel', 'Chirripó'] },
                        'alvarado': { nombre: 'Alvarado', distritos: ['Pacayas', 'Cervantes', 'Capellades'] },
                        'oreamuno': { nombre: 'Oreamuno', distritos: ['San Rafael', 'Cot', 'Potrero Cerrado', 'Cipreses', 'Santa Rosa'] },
                        'el-guarco': { nombre: 'El Guarco', distritos: ['El Tejar', 'San Isidro', 'Tobosi', 'Patio de Agua'] }
                    }
                },
                'heredia': {
                    nombre: 'Heredia',
                    cantones: {
                        'heredia': { nombre: 'Heredia', distritos: ['Heredia', 'Mercedes', 'San Francisco', 'Ulloa', 'Varablanca'] },
                        'barva': { nombre: 'Barva', distritos: ['Barva', 'San Pedro', 'San Pablo', 'San Roque', 'Santa Lucía', 'San José de la Montaña'] },
                        'santo-domingo': { nombre: 'Santo Domingo', distritos: ['Santo Domingo', 'San Vicente', 'San Miguel', 'Paracito', 'Santo Tomás', 'Santa Rosa', 'Tures', 'Pará'] },
                        'santa-barbara': { nombre: 'Santa Bárbara', distritos: ['Santa Bárbara', 'San Pedro', 'San Juan', 'Jesús', 'Santo Domingo del Roble', 'Purabá'] },
                        'san-rafael': { nombre: 'San Rafael', distritos: ['San Rafael', 'San Josecito', 'Santiago', 'Ángeles', 'Concepción'] },
                        'san-isidro': { nombre: 'San Isidro', distritos: ['San Isidro', 'San José', 'Concepción', 'San Francisco'] },
                        'belen': { nombre: 'Belén', distritos: ['San Antonio', 'La Ribera', 'La Asunción'] },
                        'flores': { nombre: 'Flores', distritos: ['San Joaquín', 'Barrantes', 'Llorente'] },
                        'san-pablo': { nombre: 'San Pablo', distritos: ['San Pablo', 'Rincón de Sabanilla'] },
                        'sarapiqui': { nombre: 'Sarapiquí', distritos: ['Puerto Viejo', 'La Virgen', 'Horquetas', 'Llanuras del Gaspar', 'Cureña'] }
                    }
                },
                'alajuela': {
                    nombre: 'Alajuela',
                    cantones: {
                        'alajuela': { nombre: 'Alajuela', distritos: ['Alajuela', 'San José', 'Carrizal', 'San Antonio', 'Guácima', 'San Isidro', 'Sabanilla', 'San Rafael', 'Río Segundo', 'Desamparados', 'Turrúcares', 'Tambor', 'Garita', 'Sarapiquí'] },
                        'san-ramon': { nombre: 'San Ramón', distritos: ['San Ramón', 'Santiago', 'San Juan', 'Piedades Norte', 'Piedades Sur', 'San Rafael', 'San Isidro', 'Ángeles', 'Alfaro', 'Volio', 'Concepción', 'Zapotal', 'Peñas Blancas', 'San Lorenzo'] },
                        'grecia': { nombre: 'Grecia', distritos: ['Grecia', 'San Isidro', 'San José', 'San Roque', 'Tacares', 'Río Cuarto', 'Puente de Piedra', 'Bolívar'] },
                        'san-mateo': { nombre: 'San Mateo', distritos: ['San Mateo', 'Desmonte', 'Jesús María', 'Labrador'] },
                        'atenas': { nombre: 'Atenas', distritos: ['Atenas', 'Jesús', 'Mercedes', 'San Isidro', 'Concepción', 'San José', 'Santa Eulalia', 'Escobal'] },
                        'naranjo': { nombre: 'Naranjo', distritos: ['Naranjo', 'San Miguel', 'San José', 'Cirrí', 'San Jerónimo', 'San Juan', 'El Rosario', 'Palmitos'] },
                        'palmares': { nombre: 'Palmares', distritos: ['Palmares', 'Zaragoza', 'Buenos Aires', 'Santiago', 'Candelaria', 'Esquipulas', 'La Granja'] },
                        'poas': { nombre: 'Poás', distritos: ['San Pedro', 'San Juan', 'San Rafael', 'Carrillos', 'Sabana Redonda'] },
                        'orotina': { nombre: 'Orotina', distritos: ['Orotina', 'El Mastate', 'Hacienda Vieja', 'Coyolar', 'La Ceiba'] },
                        'san-carlos': { nombre: 'San Carlos', distritos: ['Quesada', 'Florencia', 'Buenavista', 'Peñas Blancas', 'La Fortuna', 'La Tigra', 'La Palmera', 'Venecia', 'Aguas Zarcas', 'Venado', 'Cutris', 'Monterrey', 'Pocosol', 'Pital', 'La Cureña', 'Santa Rosa', 'Buenos Aires', 'San Jerónimo', 'San Luis', 'San Rafael', 'San Isidro', 'San José', 'San Miguel', 'San Pedro', 'San Ramón', 'Santa Clara', 'Santa María', 'Santa Rosa', 'Santo Domingo', 'Sitio Mata'] },
                        'zarcero': { nombre: 'Zarcero', distritos: ['Zarcero', 'Laguna', 'Tapezco', 'Guadalupe', 'Palmira', 'Zapote', 'Brisas'] },
                        'valverde-vega': { nombre: 'Valverde Vega', distritos: ['Sarchí Norte', 'Sarchí Sur', 'Toro Amarillo', 'San Pedro', 'Rodriguez', 'San Juan'] },
                        'upala': { nombre: 'Upala', distritos: ['Upala', 'Aguas Claras', 'San José', 'Bijagua', 'Delicias', 'Dos Ríos', 'Yolillal', 'Canalete'] },
                        'guatuso': { nombre: 'Guatuso', distritos: ['San Rafael', 'Buenavista', 'Cote', 'Katira'] },
                        'rio-cuarto': { nombre: 'Río Cuarto', distritos: ['Río Cuarto', 'Santa Isabel', 'Santa Rita'] }
                    }
                },
                'guanacaste': {
                    nombre: 'Guanacaste',
                    cantones: {
                        'liberia': { nombre: 'Liberia', distritos: ['Liberia', 'Cañas Dulces', 'Mayorga', 'Nacascolo', 'Curubandé'] },
                        'nicoya': { nombre: 'Nicoya', distritos: ['Nicoya', 'Mansión', 'San Antonio', 'Quebrada Honda', 'Sámara', 'Nosara', 'Belén de Nosarita'] },
                        'santa-cruz': { nombre: 'Santa Cruz', distritos: ['Santa Cruz', 'Bolsón', 'Veintisiete de Abril', 'Tempate', 'Cartagena', 'Cuajiniquil', 'Diriá', 'Cabo Velas', 'Tamarindo'] },
                        'bagaces': { nombre: 'Bagaces', distritos: ['Bagaces', 'Fortuna', 'Mogote', 'Río Naranjo'] },
                        'carrillo': { nombre: 'Carrillo', distritos: ['Filadelfia', 'Palmira', 'Sardinal', 'Belén'] },
                        'cañas': { nombre: 'Cañas', distritos: ['Cañas', 'Palmira', 'San Miguel', 'Bebedero', 'Porozal'] },
                        'abangares': { nombre: 'Abangares', distritos: ['Las Juntas', 'Sierra', 'San Juan', 'Colorado'] },
                        'tilaran': { nombre: 'Tilarán', distritos: ['Tilarán', 'Quebrada Grande', 'Tronadora', 'Santa Rosa', 'Líbano', 'Tierras Morenas', 'Arenal'] },
                        'nandayure': { nombre: 'Nandayure', distritos: ['Carmona', 'Santa Rita', 'Zapotal', 'San Pablo', 'Porvenir', 'Bejuco'] },
                        'la-cruz': { nombre: 'La Cruz', distritos: ['La Cruz', 'Santa Cecilia', 'Garita', 'Santa Elena'] },
                        'hojancha': { nombre: 'Hojancha', distritos: ['Hojancha', 'Monte Romo', 'Puerto Carrillo', 'Huacas'] }
                    }
                },
                'puntarenas': {
                    nombre: 'Puntarenas',
                    cantones: {
                        'puntarenas': { nombre: 'Puntarenas', distritos: ['Puntarenas', 'Pitahaya', 'Chomes', 'Lepanto', 'Paquera', 'Manzanillo', 'Guacimal', 'Barranca', 'Monte Verde', 'Isla del Coco', 'Cóbano', 'Chacarita', 'Chira', 'Acapulco', 'El Roble', 'Arancibia'] },
                        'esparza': { nombre: 'Esparza', distritos: ['Espíritu Santo', 'San Juan Grande', 'Macacona', 'San Rafael', 'San Jerónimo'] },
                        'buenos-aires': { nombre: 'Buenos Aires', distritos: ['Buenos Aires', 'Volcán', 'Potrero Grande', 'Boruca', 'Pilas', 'Colinas', 'Changena', 'Biolley', 'Brunka'] },
                        'montes-de-oro': { nombre: 'Montes de Oro', distritos: ['Miramar', 'La Unión', 'San Isidro'] },
                        'osa': { nombre: 'Osa', distritos: ['Puerto Cortés', 'Palmar', 'Sierpe', 'Bahía Ballena', 'Piedras Blancas', 'Bahía Drake'] },
                        'quepos': { nombre: 'Quepos', distritos: ['Quepos', 'Savegre', 'Naranjito'] },
                        'golfito': { nombre: 'Golfito', distritos: ['Golfito', 'Puerto Jiménez', 'Guaycará', 'Pavón'] },
                        'coto-brus': { nombre: 'Coto Brus', distritos: ['San Vito', 'Sabalito', 'Aguabuena', 'Limoncito', 'Pittier', 'Gutiérrez Braun'] },
                        'parrita': { nombre: 'Parrita', distritos: ['Parrita'] },
                        'corredores': { nombre: 'Corredores', distritos: ['Corredor', 'La Cuesta', 'Canoas', 'Laurel'] },
                        'garabito': { nombre: 'Garabito', distritos: ['Jacó', 'Tárcoles'] }
                    }
                },
                'limon': {
                    nombre: 'Limón',
                    cantones: {
                        'limon': { nombre: 'Limón', distritos: ['Limón', 'Valle La Estrella', 'Río Blanco', 'Matama'] },
                        'pococi': { nombre: 'Pococí', distritos: ['Guápiles', 'Jiménez', 'Rita', 'Roxana', 'Cariari', 'Colorado', 'La Colonia'] },
                        'siquirres': { nombre: 'Siquirres', distritos: ['Siquirres', 'Pacuarito', 'Florida', 'Germania', 'Cairo', 'Alegría'] },
                        'talamanca': { nombre: 'Talamanca', distritos: ['Bratsi', 'Sixaola', 'Cahuita', 'Telire'] },
                        'matina': { nombre: 'Matina', distritos: ['Matina', 'Carrandi', 'Batán'] },
                        'guacimo': { nombre: 'Guácimo', distritos: ['Guácimo', 'Mercedes', 'Pocora', 'Río Jiménez', 'Duacarí'] }
                    }
                }
            };

            // Función para cargar cantones según la provincia seleccionada
            window.cargarCantones = function() {
                const provinciaSelect = document.getElementById('provincia');
                const cantonSelect = document.getElementById('canton');
                const distritoSelect = document.getElementById('distrito');
                
                if (!provinciaSelect || !cantonSelect || !distritoSelect) return;
                
                const provinciaSeleccionada = provinciaSelect.value;
                
                // Limpiar cantones y distritos
                cantonSelect.innerHTML = '<option value="">Seleccionar cantón</option>';
                distritoSelect.innerHTML = '<option value="">Seleccionar distrito</option>';
                
                if (provinciaSeleccionada && datosCostaRica[provinciaSeleccionada]) {
                    const cantones = datosCostaRica[provinciaSeleccionada].cantones;
                    
                    Object.keys(cantones).forEach(cantonKey => {
                        const canton = cantones[cantonKey];
                        const option = document.createElement('option');
                        option.value = cantonKey;
                        option.textContent = canton.nombre;
                        cantonSelect.appendChild(option);
                    });
                }
            };

            // Función para cargar distritos según el cantón seleccionado
            window.cargarDistritos = function() {
                const provinciaSelect = document.getElementById('provincia');
                const cantonSelect = document.getElementById('canton');
                const distritoSelect = document.getElementById('distrito');
                
                if (!provinciaSelect || !cantonSelect || !distritoSelect) return;
                
                const provinciaSeleccionada = provinciaSelect.value;
                const cantonSeleccionado = cantonSelect.value;
                
                // Limpiar distritos
                distritoSelect.innerHTML = '<option value="">Seleccionar distrito</option>';
                
                if (provinciaSeleccionada && cantonSeleccionado && 
                    datosCostaRica[provinciaSeleccionada] && 
                    datosCostaRica[provinciaSeleccionada].cantones[cantonSeleccionado]) {
                    
                    const distritos = datosCostaRica[provinciaSeleccionada].cantones[cantonSeleccionado].distritos;
                    
                    distritos.forEach(distrito => {
                        const option = document.createElement('option');
                        option.value = distrito.toLowerCase().replace(/\s+/g, '-');
                        option.textContent = distrito;
                        distritoSelect.appendChild(option);
                    });
                }
            };

            // Función para mostrar productos en el modal de pago
            window.mostrarProductosEnPago = function() {
                console.log('=== MOSTRANDO PRODUCTOS EN PAGO ===');
                
                const productosContainer = document.getElementById('productos-seleccionados');
                const montoTotal = document.getElementById('monto-total-pago');
                
                console.log('Elementos encontrados:', {
                    productosContainer: !!productosContainer,
                    montoTotal: !!montoTotal
                });
                
                if (!productosContainer || !montoTotal) {
                    console.error('No se encontraron los elementos del modal de pago');
                    return;
                }
                
                // Obtener carrito desde localStorage
                let carrito = [];
                try {
                    const carritoGuardado = localStorage.getItem('luArtCarrito');
                    if (carritoGuardado) {
                        carrito = JSON.parse(carritoGuardado);
                    }
                } catch (e) {
                    console.error('Error cargando carrito:', e);
                }
                
                console.log('Carrito cargado para mostrar:', carrito);
                
                if (carrito.length === 0) {
                    productosContainer.innerHTML = '<p class="text-muted mb-0">No hay productos seleccionados</p>';
                    montoTotal.textContent = '₡0';
                    console.log('Carrito vacío, mostrando mensaje');
                    return;
                }
                
                let total = 0;
                let productosHTML = '';
                
                carrito.forEach(item => {
                    const subtotal = item.precio * item.cantidad;
                    total += subtotal;
                    productosHTML += `
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span>${item.nombre} - ${item.cantidad} x ₡${item.precio.toLocaleString()}</span>
                            <strong>₡${subtotal.toLocaleString()}</strong>
                        </div>
                    `;
                });
                
                productosContainer.innerHTML = productosHTML;
                montoTotal.textContent = `₡${total.toLocaleString()}`;
                
                console.log('Productos mostrados correctamente, total:', total);
            };
            
            // Función para enviar pedido por WhatsApp
            window.enviarPedidoWhatsApp = function() {
                console.log('=== ENVIANDO PEDIDO POR WHATSAPP ===');
                
                // Obtener datos del formulario
                const provincia = document.getElementById('provincia').value;
                const canton = document.getElementById('canton').value;
                const distrito = document.getElementById('distrito').value;
                const direccionExacta = document.getElementById('direccion-exacta').value;
                const indicaciones = document.getElementById('indicaciones').value;
                const facturaElectronica = document.getElementById('factura-electronica').checked;
                
                console.log('Datos:', {provincia, canton, distrito, direccionExacta, indicaciones, facturaElectronica});
                
                // Validar campos requeridos
                if (!provincia || !canton || !distrito || !direccionExacta) {
                    alert('Por favor complete todos los campos requeridos');
                    return;
                }
                
                // Obtener carrito
                let carrito = [];
                try {
                    const carritoGuardado = localStorage.getItem('luArtCarrito');
                    if (carritoGuardado) {
                        carrito = JSON.parse(carritoGuardado);
                    }
                } catch (e) {
                    console.error('Error cargando carrito:', e);
                }
                
                console.log('Carrito:', carrito);
                
                if (carrito.length === 0) {
                    alert('No hay productos en el carrito');
                    return;
                }
                
                // Construir mensaje
                let mensaje = '* PEDIDO LU ART *\n\n';
                mensaje += '* Productos seleccionados:*\n';
                
                let total = 0;
                carrito.forEach(item => {
                    const subtotal = item.precio * item.cantidad;
                    total += subtotal;
                    mensaje += `• ${item.nombre} - ${item.cantidad} x ₡${item.precio.toLocaleString()} = ₡${subtotal.toLocaleString()}\n`;
                });
                
                mensaje += `\n *Monto total a pagar: ₡${total.toLocaleString()}*\n\n`;
                mensaje += '* Dirección de envío:*\n';
                mensaje += `Provincia: ${provincia}\n`;
                mensaje += `Cantón: ${canton}\n`;
                mensaje += `Distrito: ${distrito}\n`;
                mensaje += `Dirección exacta: ${direccionExacta}\n`;
                
                if (indicaciones) {
                    mensaje += `Indicaciones adicionales: ${indicaciones}\n`;
                }
                
                if (facturaElectronica) {
                    mensaje += `\n *Requiere factura electrónica: SÍ*\n`;
                }
                
                mensaje += '\n\n *Gracias por elegir Lu Art!*';
                
                // Construir URL de WhatsApp
                const numeroWhatsApp = '50670605427';
                const mensajeCodificado = encodeURIComponent(mensaje);
                const urlWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${mensajeCodificado}`;
                
                console.log('Mensaje:', mensaje);
                console.log('URL:', urlWhatsApp);
                
                // Abrir WhatsApp
                window.open(urlWhatsApp, '_blank');
                
                // Limpiar carrito
                localStorage.removeItem('luArtCarrito');
                
                // Cerrar modal
                const modalPago = bootstrap.Modal.getInstance(document.getElementById('modalPago'));
                if (modalPago) {
                    modalPago.hide();
                }
                
                // Recargar página
                setTimeout(() => {
                    location.reload();
                }, 1000);
            };
            
            // Configurar event listeners cuando el DOM esté listo
            document.addEventListener('DOMContentLoaded', function() {
                console.log('=== DOMContentLoaded EN SCRIPT FINAL ===');
                
                // Event listener para el modal del carrito
                const modalCarrito = document.getElementById('carritoModal');
                if (modalCarrito) {
                    console.log('Modal del carrito encontrado, agregando event listener');
                    modalCarrito.addEventListener('show.bs.modal', function() {
                        console.log('Modal del carrito abriéndose - renderizando carrito');
                        window.renderCarrito();
                    });
                }
                
                // Event listener para el modal de pago
                const modalPago = document.getElementById('modalPago');
                if (modalPago) {
                    console.log('Modal de pago encontrado, agregando event listener');
                    modalPago.addEventListener('show.bs.modal', function() {
                        console.log('Modal de pago abriéndose, mostrando productos');
                        window.mostrarProductosEnPago();
                    });
                } else {
                    console.error('No se encontró el modal de pago');
                }
                
                // Event listeners para provincia, cantón y distrito
                const provinciaSelect = document.getElementById('provincia');
                const cantonSelect = document.getElementById('canton');
                const distritoSelect = document.getElementById('distrito');
                
                if (provinciaSelect) {
                    provinciaSelect.addEventListener('change', window.cargarCantones);
                    console.log('Event listener agregado a provincia');
                }
                
                if (cantonSelect) {
                    cantonSelect.addEventListener('change', window.cargarDistritos);
                    console.log('Event listener agregado a cantón');
                }
                
                console.log('Event listeners configurados para formulario de dirección');
            });
            
            // Verificar si las funciones están definidas
            setTimeout(() => {
                console.log('=== VERIFICACIÓN DESPUÉS DE 1 SEGUNDO ===');
                console.log('mostrarProductosEnPago:', typeof window.mostrarProductosEnPago !== 'undefined');
                console.log('enviarPedidoWhatsApp:', typeof window.enviarPedidoWhatsApp !== 'undefined');
                console.log('probarWhatsAppSimple:', typeof window.probarWhatsAppSimple !== 'undefined');
                console.log('cargarCantones:', typeof window.cargarCantones !== 'undefined');
                console.log('cargarDistritos:', typeof window.cargarDistritos !== 'undefined');
                console.log('debugCarrito:', typeof window.debugCarrito !== 'undefined');
                console.log('agregarProductosPrueba:', typeof window.agregarProductosPrueba !== 'undefined');
                console.log('renderCarrito:', typeof window.renderCarrito !== 'undefined');
                console.log('actualizarContadorCarrito:', typeof window.actualizarContadorCarrito !== 'undefined');
                console.log('cerrarCarrito:', typeof window.cerrarCarrito !== 'undefined');
                console.log('cerrarModalPago:', typeof window.cerrarModalPago !== 'undefined');
                console.log('abrirModalPago:', typeof window.abrirModalPago !== 'undefined');
                console.log('Todas las funciones del script final están disponibles');
            }, 1000);
        </script>
    </html>
