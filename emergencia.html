<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Botón de Emergencia - LuArt</title>
    <style>
        .emergency-button {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 9999;
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .emergency-button:hover {
            background: #c82333;
        }
    </style>
</head>
<body>
    <h1>Página de Prueba con Botón de Emergencia</h1>
    <p>Si la web se bloquea, usa el botón rojo en la esquina superior derecha.</p>
    
    <!-- Botón de emergencia -->
    <button class="emergency-button" onclick="limpiarTodo()">
        🚨 DESBLOQUEAR
    </button>
    
    <script>
        // Función de emergencia para limpiar todo - DEFINIDA DIRECTAMENTE
        window.limpiarTodo = function() {
            console.log('=== LIMPIEZA DE EMERGENCIA ===');
            
            // Restaurar scroll del body
            document.body.style.overflow = '';
            document.body.style.paddingRight = '';
            
            // Remover clases de modal
            document.body.classList.remove('modal-open');
            
            // Remover cualquier backdrop residual
            const backdrops = document.querySelectorAll('.modal-backdrop');
            console.log('Backdrops encontrados:', backdrops.length);
            backdrops.forEach(backdrop => {
                console.log('Removiendo backdrop:', backdrop);
                backdrop.remove();
            });
            
            // Cerrar todos los modales de Bootstrap
            if (typeof bootstrap !== 'undefined') {
                const modales = document.querySelectorAll('.modal.show');
                modales.forEach(modal => {
                    const modalInstance = bootstrap.Modal.getInstance(modal);
                    if (modalInstance) {
                        modalInstance.hide();
                    }
                });
            }
            
            console.log('Limpieza de emergencia completada');
        };
        
        console.log('Función limpiarTodo definida:', typeof window.limpiarTodo !== 'undefined');
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/carrito.js"></script>
    
    <script>
        console.log('=== PÁGINA CON BOTÓN DE EMERGENCIA CARGADA ===');
        console.log('Función limpiarTodo disponible:', typeof window.limpiarTodo !== 'undefined');
        console.log('Para desbloquear manualmente, ejecuta: limpiarTodo()');
    </script>
</body>
</html>
